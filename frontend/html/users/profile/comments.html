{% extends "layout.html" %}
{% load static %}
{% load comments %}
{% load posts %}
{% load text_filters %}
{% load paginator %}

{% block title %}
    Комментарии от {{ user.full_name }} — {{ block.super }}
{% endblock %}

{% block content %}
    <div class="content profile">
        {% include "users/widgets/card.html" with user=user %}

        <div class="profile-header" id="comments">
            {{ comments.paginator.count }} {{ comments.paginator.count|rupluralize:"комментарий,комментария,комментариев" }}

            {% if comments %}
                <form action=".#comments" method="get" class="post-comments-order">
                    <select name="comment_order" onchange="this.form.submit()">
                        <option value="-upvotes" {% if comment_order == "-upvotes" %}selected{% endif %}>по крутости</option>
                        <option value="-created_at" {% if comment_order == "-created_at" %}selected{% endif %}>по свежести</option>
                        <option value="created_at" {% if comment_order == "created_at" %}selected{% endif %}>по порядку</option>
                    </select>
                </form>
            {% endif %}

        </div>

        <div class="profile-comment-list">
            {% if comments %}
                {% for comment in comments %}
                    {% include "comments/types/snippet.html" with comment=comment %}
                {% endfor %}
            {% else %}
                <div class="profile-comments-list-placeholder">
                    Пользователь пока не оставил комментариев...
                </div>
            {% endif %}

            <div class="feed-paginator">
                {% paginator comments %}
            </div>
        </div>
    </div>
{% endblock %}
