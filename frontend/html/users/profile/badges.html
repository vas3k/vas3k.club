{% extends "layout.html" %}
{% load static %}
{% load comments %}
{% load posts %}
{% load text_filters %}
{% load paginator %}

{% block title %}
    –ù–∞–≥—Ä–∞–¥—ã —é–∑–µ—Ä–∞ {{ user.full_name }} ‚Äî {{ block.super }}
{% endblock %}

{% block content %}
    <div class="content profile">
        {% include "users/widgets/card.html" with user=user %}

        <div class="profile-header">
            {{ badges.paginator.count }} {{ badges.paginator.count|rupluralize:"–Ω–∞–≥—Ä–∞–¥–∞,–Ω–∞–≥—Ä–∞–¥—ã,–Ω–∞–≥—Ä–∞–¥" }}
        </div>

        <div class="profile-list">
            {% if badges %}
                {% for user_badge in badges %}
                    <div class="block profile-badge">
                        <div class="profile-badge-side">
                            <img
                                src="{% static "images/badges" %}/big/{{ user_badge.badge.code }}.png"
                                alt="{{ user_badge.badge.title }}"
                                class="badge-image profile-badge-image">
                        </div>

                        <div class="profile-badge-main">
                            <div class="profile-badge-title">
                                <strong>¬´{{ user_badge.badge.title }}¬ª</strong>

                                {% if user_badge.comment %}
                                    –∑–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ—Å—Ç—É <strong><a href="{% url "show_post" user_badge.comment.post.type user_badge.comment.post.slug %}#comment-{{ user_badge.comment.id }}">{{ user_badge.comment.post.title }}</a></strong>.
                                {% elif user_badge.post %}
                                    –∑–∞ –ø–æ—Å—Ç <strong><a href="{% url "show_post" user_badge.post.type user_badge.post.slug %}">{{ user_badge.post.title }}</a></strong>
                                {% else %}
                                    –∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —É–¥–∞–ª—ë–Ω
                                {% endif %}
                            </div>

                            <div class="profile-badge-body">
                                {% if user_badge.note %}
                                    <span class="profile-badge-note">
                                        ‚Äî {{ user_badge.note }}
                                    </span>
                                {% endif %}

                                <span class="profile-badge-from">
                                    {{ user_badge.created_at|date:"j E Y" }}
                                    &nbsp;¬∑&nbsp;
                                    {% include "users/widgets/tiny.html" with user=user_badge.from_user %}
                                </span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="profile-list-placeholder">
                    ü•∫ –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –Ω–∞–≥—Ä–∞–¥...
                </div>
            {% endif %}

            <div class="feed-paginator">
                {% paginator badges %}
            </div>
        </div>
    </div>
{% endblock %}
